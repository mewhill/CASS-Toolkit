!function(e){"use strict";function t(){var t,i=[],r=a.nodesToArray(e.document.querySelectorAll("div.slimmage"));for(r=i.slice.call(r,0,r.length);r.length;){var n=r.shift();(t=document.deepCss(n,"background-image"))&&(t=/url\(['"]?([^")]+)/.exec(t)||[]),void 0!==(t=t[1])&&0!=t.length||(t=n.getAttribute("data-background")),i[i.length]={el:n,url:t}}return i}var a=window.slimmage||{};window.slimmage=a,void 0===a.verbose&&(a.verbose=!0),void 0===a.tryWebP&&(a.tryWebP=!1),void 0===a.readyCallback&&(a.readyCallback=null),void 0===a.maxWidth&&(a.maxWidth=2048),void 0===a.widthStep&&(a.widthStep=160),void 0===a.jpegQuality&&(a.jpegQuality=90),void 0===a.jpegRetinaQuality&&(a.jpegRetinaQuality=80);var i=function(){if(e.slimmage.verbose&&e.console&&e.console.log)try{e.console.log.apply(e.console,arguments)}catch(e){}};a.beginWebPTest=function(){if(a.tryWebP&&!a._testingWebP){a._testingWebP=!0;var e=new Image;e.onload=e.onerror=function(){a.webp=2==e.height},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}},a.getCssValue=function(e,t){var a=void 0!==window.getComputedStyle&&window.getComputedStyle(e,null).getPropertyValue(t);return!a&&e.currentStyle&&(a=e.currentStyle[t.replace(/([a-z])\-([a-z])/,function(e,t,a){return t+a.toUpperCase()})]||e.currentStyle[t]),a},a.getCssPixels=function(e,t){var i=a.getCssValue(e,t);if("px"==i.slice(-2))return parseFloat(i.slice(0,-2));"none"==i&&(i="");var r=document.createElement("div");r.style.overflow=r.style.visibility="hidden",r.style.clear="both",e.parentNode.appendChild(r),r.style.width=i;var n=r.offsetWidth;return e.parentNode.removeChild(r),n},a.nodesToArray=function(e){for(var t=[],a=e.length>>>0;a--;)t[a]=e[a];return t},a.getImageSrcWithWidth=function(e,t,r){var n={webp:a.webp,width:r,dpr:window.devicePixelRatio||1,src:t};n.requestedWidth=Math.min(a.maxWidth,n.width*n.dpr),n.quality=n.dpr>1.49?a.jpegRetinaQuality:a.jpegQuality,n.webp&&(n.quality=n.dpr>1.49?65:78),n.requestedWidth=n.requestedWidth-n.requestedWidth%a.widthStep+a.widthStep;var l=0|e.getAttribute("data-pixel-width");if(a.adjustImageParameters&&"function"==typeof a.adjustImageParameters&&a.adjustImageParameters(n),n.requestedWidth>l){var d=t.replace(/width=\d+/i,"width="+n.requestedWidth).replace(/quality=[0-9]+/i,"quality="+n.quality);return n.webp&&(d=d.replace(/format=[a-z]+/i,"format=webp")),e.setAttribute("data-pixel-width",n.requestedWidth),i("Slimming: updating "+d),d}},a.adjustImageSrc=function(e,t){var i=a.getImageSrcWithWidth(e,t,a.getCssPixels(e,"max-width"));i&&(e.getAttribute("class")&&-1!=e.getAttribute("class").indexOf("lazyLoad")?e.setAttribute("data-original",i):e.src=i)},a.adjustBackgroundImage=function(e,t){var i=a.getImageSrcWithWidth(e,t,a.getCssPixels(e,"max-width"));i&&(e.getAttribute("class")&&-1!=e.getAttribute("class").indexOf("lazyLoad")?e.setAttribute("data-background",i):e.style.backgroundImage="url("+i+")")},a.checkResponsiveImages=function(r){if(a.timeoutid>0&&e.clearTimeout(a.timeoutid),a.timeoutid=0,r&&r>0)a.timeoutid=e.setTimeout(a.checkResponsiveImages,r);else{for(var n=(new Date).getTime(),l=0,d=a.nodesToArray(e.document.getElementsByTagName("noscript")),s=0,o=d.length;s<o;s++){var u=d[s];if(null!==u.getAttribute("data-slimmage")){var g=e.document.createElement("div"),c=u.textContent||u.innerHTML;if(c&&0!=c.replace(/[\s\t\r\n]+/,"").length)g.innerHTML=c.replace(/\s+src\s*=\s*(['"])/i," data-src=$1").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&");else{for(var m=new Image,p=0;p<u.attributes.length;p++){var v=u.attributes[p];v&&v.specified&&0==v.name.indexOf("data-img-")&&m.setAttribute(v.name.slice(9-v.name.length),v.value)}g.appendChild(m)}for(var h=g.getElementsByTagName("img"),f=0,y=h.length;f<y;f++){var b=h[f];null!==b.src&&b.src.length>0&&(b.setAttribute("data-src",b.src),b.src=""),b.setAttribute("data-slimmage",!0),u.parentNode.insertBefore(b,u),l++}u.parentNode.removeChild(u)}}for(var A=0,w=a.nodesToArray(e.document.getElementsByTagName("img")),s=0,o=w.length;s<o;s++)if(null!==w[s].getAttribute("data-slimmage")){var C=w[s].getAttribute("data-original")||w[s].getAttribute("data-src")||w[s].src;a.adjustImageSrc(w[s],C),A++}if(e.document.querySelectorAll)for(var W=t(),s=0,o=W.length;s<o;s++){var S=W[s].el.getAttribute("data-slimmage-bg");if(null===S){var I=W[s].url;null!==I&&void 0!==I||(I=""),-1==I.indexOf("width=")&&(-1==I.indexOf("?")?I+="?":I+="&",I+="width=720"),W[s].el.setAttribute("data-slimmage-bg",I),S=I}null!==S&&(a.adjustBackgroundImage(W[s].el,S),A++)}"function"==typeof a.readyCallback&&a.readyCallback(),i("Slimmage: restored "+l+" images from noscript tags; sizing "+A+" images. "+((new Date).getTime()-n)+"ms")}},document.deepCss=function(e,t){if(!e||!e.style)return"";var a=t.replace(/\-([a-z])/g,function(e,t){return t.toUpperCase()});if(e.currentStyle)return e.style[a]||e.currentStyle[a]||"";var i=document.defaultView||window;return e.style[a]||i.getComputedStyle(e,"").getPropertyValue(t)||""};var r=a.checkResponsiveImages;e.addEventListener?(e.addEventListener("resize",function(){r(500)},!1),e.addEventListener("DOMContentLoaded",function(){r(),e.removeEventListener("load",r,!1)},!1),e.addEventListener("load",r,!1)):e.attachEvent&&e.attachEvent("onload",r),a.beginWebPTest()}(this);